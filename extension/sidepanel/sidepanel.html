<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Test Recorder</title>
    <link rel="stylesheet" href="sidepanel.css" />
  </head>
  <body>
    <!-- â”€â”€ Header â”€â”€ -->
    <header>
      <h1>Test Recorder</h1>
      <button id="btn-theme" class="theme-toggle" title="Cambiar tema">
        ðŸŒ™
      </button>
    </header>

    <!-- â”€â”€ Record Section â”€â”€ -->
    <section id="record-section">
      <div id="record-idle">
        <button id="btn-start-record" class="btn btn-record">
          <span class="dot"></span> Iniciar grabaciÃ³n
        </button>
      </div>

      <div id="record-active" class="hidden">
        <div class="recording-indicator">
          <span class="dot dot-pulse"></span>
          <span>Grabandoâ€¦ <strong id="step-count">0</strong> acciones</span>
        </div>

        <!-- Live feed of captured actions -->
        <ul id="record-feed" class="record-feed"></ul>

        <div class="record-actions">
          <button id="btn-stop-record" class="btn btn-primary">Guardar</button>
          <button id="btn-cancel-record" class="btn btn-ghost">Cancelar</button>
        </div>
      </div>
    </section>

    <hr />

    <!-- â”€â”€ Recordings List â”€â”€ -->
    <section id="list-section">
      <div class="list-header">
        <h2>Mis pruebas</h2>
        <button id="btn-run-all" class="btn btn-primary btn-sm" disabled>
          â–¶ Correr todas
        </button>
      </div>

      <div id="recordings-empty" class="empty-state hidden">
        <p>
          AÃºn no tienes pruebas grabadas.<br />Presiona
          <strong>Iniciar grabaciÃ³n</strong> para empezar.
        </p>
      </div>

      <ul id="recordings-list"></ul>
    </section>

    <!-- â”€â”€ Active Run Progress â”€â”€ -->
    <section id="run-section" class="hidden">
      <hr />
      <div class="run-header">
        <span id="run-title">Corriendoâ€¦</span>
        <button id="btn-abort" class="btn btn-ghost btn-sm">Detener</button>
      </div>
      <div class="progress-bar-wrap">
        <div id="progress-bar" class="progress-bar"></div>
      </div>
      <p id="run-subtitle" class="run-subtitle"></p>
      <ul id="steps-list" class="steps-list"></ul>
    </section>

    <!-- â”€â”€ Batch Summary â”€â”€ -->
    <section id="batch-section" class="hidden">
      <hr />
      <h2>Resultado del batch</h2>
      <p id="batch-summary"></p>
      <ul id="batch-results"></ul>
    </section>

    <!-- â”€â”€ Name Dialog (for stop recording) â”€â”€ -->
    <div id="name-overlay" class="hidden overlay">
      <div class="dialog">
        <h3>Nombre de la prueba</h3>
        <input
          id="dialog-name"
          type="text"
          placeholder="Ej: Login Valex"
          maxlength="60"
        />
        <div class="dialog-actions">
          <button id="btn-dialog-save" class="btn btn-primary">Guardar</button>
          <button id="btn-dialog-cancel" class="btn btn-ghost">Cancelar</button>
        </div>
      </div>
    </div>

    <script type="module" src="sidepanel.js"></script>
  </body>
</html>
