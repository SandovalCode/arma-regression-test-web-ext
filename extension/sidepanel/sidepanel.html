<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Test Recorder</title>
    <link rel="stylesheet" href="sidepanel.css" />
  </head>
  <body>
    <!-- â”€â”€ Header â”€â”€ -->
    <header>
      <h1>Test Recorder</h1>
      <button id="btn-theme" class="theme-toggle" title="Toggle theme">
        ðŸŒ™
      </button>
    </header>

    <!-- â”€â”€ Record Section â”€â”€ -->
    <section id="record-section">
      <div id="record-idle">
        <button id="btn-start-record" class="btn btn-record">
          <span class="dot"></span> Start recording
        </button>
      </div>

      <div id="record-active" class="hidden">
        <div class="recording-indicator">
          <span class="dot dot-pulse"></span>
          <span>Recordingâ€¦ <strong id="step-count">0</strong> actions</span>
        </div>

        <!-- Live feed of captured actions -->
        <ul id="record-feed" class="record-feed"></ul>

        <div class="record-actions">
          <button id="btn-stop-record" class="btn btn-primary">Save</button>
          <button id="btn-cancel-record" class="btn btn-ghost">Cancel</button>
        </div>
      </div>
    </section>

    <hr />

    <!-- â”€â”€ Recordings List â”€â”€ -->
    <section id="list-section">
      <div class="list-header">
        <h2>My tests</h2>
        <button id="btn-run-all" class="btn btn-primary btn-sm" disabled>
          â–¶ Run all
        </button>
      </div>

      <div id="recordings-empty" class="empty-state hidden">
        <p>
          You have no recorded tests yet.<br />Press
          <strong>Start recording</strong> to begin.
        </p>
      </div>

      <ul id="recordings-list"></ul>
    </section>

    <!-- â”€â”€ Active Run Progress â”€â”€ -->
    <section id="run-section" class="hidden">
      <hr />
      <div class="run-header">
        <span id="run-title">Runningâ€¦</span>
        <button id="btn-abort" class="btn btn-ghost btn-sm">Stop</button>
      </div>
      <div class="progress-bar-wrap">
        <div id="progress-bar" class="progress-bar"></div>
      </div>
      <p id="run-subtitle" class="run-subtitle"></p>
      <ul id="steps-list" class="steps-list"></ul>
    </section>

    <!-- â”€â”€ Batch Summary â”€â”€ -->
    <section id="batch-section" class="hidden">
      <hr />
      <h2>Batch results</h2>
      <p id="batch-summary"></p>
      <ul id="batch-results"></ul>
    </section>

    <!-- â”€â”€ Name Dialog (for stop recording) â”€â”€ -->
    <div id="name-overlay" class="hidden overlay">
      <div class="dialog">
        <h3>Test name</h3>
        <input
          id="dialog-name"
          type="text"
          placeholder="E.g.: Login flow"
          maxlength="60"
        />
        <div class="dialog-actions">
          <button id="btn-dialog-save" class="btn btn-primary">Save</button>
          <button id="btn-dialog-cancel" class="btn btn-ghost">Cancel</button>
        </div>
      </div>
    </div>

    <!-- â”€â”€ Save Variable Dialog â”€â”€ -->
    <div id="var-overlay" class="hidden overlay">
      <div class="dialog">
        <h3>Save variable</h3>
        <label class="edit-label">Variable name</label>
        <input id="var-name" type="text" placeholder="e.g. username" maxlength="40" />
        <label class="edit-label">Default value</label>
        <input id="var-value" type="text" placeholder="Value from page" maxlength="200" />
        <div class="dialog-actions">
          <button id="btn-var-save" class="btn btn-primary">Save</button>
          <button id="btn-var-cancel" class="btn btn-ghost">Cancel</button>
        </div>
      </div>
    </div>

    <!-- â”€â”€ Edit Recording Overlay â”€â”€ -->
    <div id="edit-overlay" class="hidden overlay">
      <div class="dialog dialog-wide">
        <h3>Edit recording</h3>
        <label class="edit-label">Name</label>
        <input id="edit-title" type="text" placeholder="Recording name" maxlength="60" />
        <div class="edit-steps-header">
          <span class="edit-label">Steps (<span id="edit-step-count">0</span>)</span>
        </div>
        <ul id="edit-steps-list" class="edit-steps-list"></ul>
        <div class="dialog-actions">
          <button id="btn-edit-save" class="btn btn-primary">Save changes</button>
          <button id="btn-edit-cancel" class="btn btn-ghost">Cancel</button>
        </div>
      </div>
    </div>

    <script type="module" src="sidepanel.js"></script>
  </body>
</html>
